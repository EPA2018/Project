@model Project.ViewModels.UserProfile.GroupVM
@using Project.ViewModels.UserProfile
@using Project.ViewModels.Story
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Group: @Model.Title</h2>

<div id="accordion">
    <div class="card">
        <div class="card-header" id="headingTwo">
            <h5 class="mb-0">
                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Add a Post
                </button>
            </h5>
        </div>
        <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo" data-parent="#accordion">
            <div class="card-body">
                @Html.Partial("_Story", new StoryVM { GroupId = Model.Id })
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" id="headingOne">
            <h5 class="mb-0">
                <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    See all @Model.Members.Count Members
                </button>
            </h5>
        </div>
        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
                @if (Model.Members.Count == 0)
                {<p>No members to show.</p>}
                @foreach (var member in Model.Members)
                {
                    <p>@Html.ActionLink($"{member.FirstName} {member.LastName} ({member.UserName})", "Index", "UserProfile", routeValues: new { member.UserName }, htmlAttributes: null)</p>
                }
            </div>
        </div>
    </div>

</div>
<hr />
<h2>See all Stories</h2>
@if (Model.RegularStories.Count + Model.GivingAdviceStories.Count + Model.AskingAdviceStories.Count == 0)
{
    <h4>No story to show. Be the first one to add a story to this group.</h4>
}
else
{
    <ul class="nav nav-pills nav-justified mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Promoted</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Regular</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Advice</a>
        </li>
    </ul>
    <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">

            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Title</th>
                        <th scope="col">By</th>
                        <th scope="col">Date</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var story in Model.PromotedRegularStories)
                    {
                        <tr>
                            <th scope="row">@story.Id</th>
                            <td><i class="fa fa-star" aria-hidden="true" style="color:goldenrod;"></i><b> @story.Title</b></td>
                            <td>@story.UserName</td>
                            <td>@story.Date</td>
                        </tr>
                    }

                    @foreach (var story in Model.PromotedGivingAdviceStories)
                    {
                        <tr>
                            <th scope="row">@story.Id</th>
                            <td><i class="fa fa-star" aria-hidden="true" style="color:goldenrod;"></i><b> @story.Title</b></td>
                            <td>@story.UserName</td>
                            <td>@story.Date</td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Title</th>
                        <th scope="col">By</th>
                        <th scope="col">Date</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var story in Model.PromotedAskingAdviceStories)
                    {
                        <tr>
                            <th scope="row">@story.Id</th>
                            <td><i class="fa fa-star" aria-hidden="true" style="color:goldenrod;"></i><b> @story.Title</b></td>
                            <td>@story.UserName</td>
                            <td>@story.Date</td>
                        </tr>
                    }

                    @foreach (var story in Model.RegularStories)
                    {
                        <tr>
                            <th scope="row">@story.Id</th>
                            <td>@story.Title</td>
                            <td>@story.UserName</td>
                            <td>@story.Date</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Title</th>
                        <th scope="col">By</th>
                        <th scope="col">Date</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var story in Model.AskingAdviceStories)
                    {
                        <tr>
                            <th scope="row">@story.Id</th>
                            <td><i class="fa fa-star" aria-hidden="true" style="color:goldenrod;"></i><b> @story.Title</b></td>
                            <td>@story.UserName</td>
                            <td>@story.Date</td>
                        </tr>
                    }

                    @foreach (var story in Model.GivingAdviceStories)
                    {
                        <tr>
                            <th scope="row">@story.Id</th>
                            <td>@story.Title</td>
                            <td>@story.UserName</td>
                            <td>@story.Date</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}






